<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tech Career Paths</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Sans:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      body { box-sizing: border-box; }
      .font-display { font-family: 'Space Mono', monospace; }
      .font-body { font-family: 'DM Sans', sans-serif; }

      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      @keyframes slideIn {
        from { opacity: 0; transform: translateX(-30px); }
        to { opacity: 1; transform: translateX(0); }
      }
      @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.02); }
      }

      .animate-fade { animation: fadeIn 0.6s ease-out forwards; }
      .animate-slide { animation: slideIn 0.5s ease-out forwards; }
      .animate-pulse-slow { animation: pulse 3s ease-in-out infinite; }

      .stat-card {
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
      }
      .stat-card:hover { transform: translateY(-2px); }

      .progress-bar { transition: width 1s ease-out; }
      .scenario-option { transition: all 0.2s ease; }
      .scenario-option:hover { transform: translateX(4px); }

      .character-card { transition: all 0.3s ease; }
      .character-card:hover { transform: scale(1.02); }

      .timeline-dot { transition: all 0.3s ease; }
      .timeline-dot.active { transform: scale(1.3); }
    </style>

    <style>@view-transition { navigation: auto; }</style>
  </head>

  <body class="h-full font-body">
    <div id="app" class="h-full w-full overflow-auto"></div>

    <script>
      // ---------------------------
      // Config
      // ---------------------------
      const defaultConfig = {
        background_color: '#ffffff',
        surface_color: '#f8faf8',
        text_color: '#24423A',
        primary_action: '#6BC285',
        secondary_action: '#24423A',
        font_family: 'DM Sans',
        font_size: 16,
        game_title: 'Parallel Paths',
        intro_heading: 'Four Careers, One Industry'
      };
      let config = { ...defaultConfig };

      // ---------------------------
      // Characters
      // ---------------------------
      const characters = {
        alex: {
          name: 'Alex Chen',
          identity: 'Man, majority background, Canadian-born',
          emoji: 'üë®‚Äçüíª',
          description: "Alex graduated top of his class with a CS degree. He's ambitious, hardworking, and ready to make his mark in tech."
        },
        jordan: {
          name: 'Jordan Williams',
          identity: 'Woman, Black Canadian, born in Canada',
          emoji: 'üë©‚Äçüíª',
          description: "Jordan graduated top of her class with a CS degree. She's ambitious, hardworking, and ready to make her mark in tech."
        },
        priya: {
          name: 'Priya Sharma',
          identity: 'Woman, South Asian, immigrated to Canada',
          emoji: 'üë©‚Äçüíª',
          description: "Priya earned her engineering degree abroad and built strong experience before landing her first Canadian tech role. She's highly skilled and excited to grow here."
        },
        jerry_indigenous: {
          name: 'Jerry Chartrand',
          identity: 'Man, Indigenous Peoples, from northern Canada',
          emoji: 'üë®‚Äçüíª',
          description: "Jerry grew up with limited access to tech resources, learned through community programs and online learning, and built a strong portfolio. He's self-driven and determined."
        }
      };

      // ---------------------------
      // Starting stats (single source of truth)
      // ---------------------------
      const startingStatsByCharacter = {
        alex: { salary: 75000, promotions: 0, confidence: 80, burnout: 10, mentors: 0 },
        jordan: { salary: 75000, promotions: 0, confidence: 80, burnout: 10, mentors: 0 },
        priya: { salary: 72000, promotions: 0, confidence: 75, burnout: 15, mentors: 0 },
        jerry_indigenous: { salary: 75000, promotions: 0, confidence: 80, burnout: 10, mentors: 0 }
      };

      // ---------------------------
      // Game state
      // ---------------------------
      let gameState = {
        screen: 'intro', // intro, select, playing, stats
        selectedCharacter: null,
        currentScenario: 0,

        alexStats: { ...startingStatsByCharacter.alex },
        jordanStats: { ...startingStatsByCharacter.jordan },
        priyaStats: { ...startingStatsByCharacter.priya },
        jerry_indigenousStats: { ...startingStatsByCharacter.jerry_indigenous }
      };

      // ---------------------------
      // Scenarios
      // IMPORTANT: every scenario is ONE complete object: { year, title, situations, outcomes, stat?, solutions? }
      // ---------------------------
      const scenarios = [
        {
          year: 1,
          title: 'First Day Onboarding',
          situations: {
            alex: 'You arrive for your first day. Your manager introduces you to the team and walks you through the office.',
            jordan: "Your onboarding covers the basics, but it feels slightly rushed. You‚Äôre introduced to the team, though conversations don‚Äôt linger. A few people ask extra questions about your background and how you found your way into tech.",
            priya: "The onboarding assumes familiarity with local workplace norms. Acronyms, tools, and unspoken expectations aren‚Äôt fully explained, and you hesitate to interrupt to ask for clarification.",
            jerry_indigenous: "People are friendly, but several ask where you‚Äôre from and what brought you into tech. The questions are well-meaning, yet you find yourself repeatedly explaining your background instead of your work."
          },
          outcomes: {
            alex: { salaryChange: 0, confidenceChange: 10, burnoutChange: 0, mentorChange: 1, promoted: null,
              text: 'You get clear context, quick access to people, and early encouragement. You feel confident walking into your first tasks.' },
            jordan: { salaryChange: 0, confidenceChange: -10, burnoutChange: 10, mentorChange: 0, promoted: null,
              text: "Nothing overt happens, but you leave the week feeling like you need to prove yourself quickly. You notice you‚Äôre more careful about how you speak and when you ask questions." },
            priya: { salaryChange: 0, confidenceChange: -15, burnoutChange: 15, mentorChange: 0, promoted: null,
              text: "You spend extra time double-checking your work and replaying conversations afterward. You‚Äôre working hard, but the effort feels invisible." },
            jerry_indigenous: { salaryChange: 0, confidenceChange: -10, burnoutChange: 5, mentorChange: 0, promoted: null,
              text: "You start the job feeling motivated, but slightly guarded. You‚Äôre aware of standing out in ways that have nothing to do with your skills." }
          },
          stat: {
            title: "Early Career Experiences Matter",
            value: "Small differences in onboarding, access to information, and informal support can compound over time‚Äîshaping confidence, visibility, and opportunity long before performance reviews begin.",
            source: "Canadian Tech Workforce Research"
          },
          solutions: {
            forIndividuals: [
              { title: 'Ask for a ‚Äúworking map‚Äù', desc: 'In week one, ask: ‚ÄúWho owns what? Where do we document decisions? What does ‚Äògood‚Äô look like here?‚Äù It‚Äôs a calm, practical way to reduce ambiguity.' },
              { title: 'Find one safe teammate', desc: 'Not a formal mentor yet‚Äîjust one person you can ask quick ‚Äúis this normal?‚Äù questions without feeling judged.' },
              { title: 'Normalize clarifying questions', desc: 'Try: ‚ÄúQuick check so I don‚Äôt miss anything‚Äîdo we prefer X or Y?‚Äù It signals competence, not uncertainty.' }
            ],
            forLeaders: [
              { title: 'Make onboarding explicit', desc: 'Spell out acronyms, norms, and ‚Äúhow we work.‚Äù Don‚Äôt rely on people to decode the culture.' },
              { title: 'Pair new hires intentionally', desc: 'Assign a buddy responsible for introductions + early context (not just ‚Äúask if you need anything‚Äù).' },
              { title: 'Measure belonging early', desc: 'Ask new hires at week 2 and week 6: ‚ÄúWhat surprised you? What‚Äôs unclear? What‚Äôs hard to access?‚Äù Then act on it.' }
            ]
          }
        },

        {
          year: 1,
          title: 'Education Background Check',
          situations: {
            alex: 'Your education comes up casually. People mention they know others from your program and swap stories about shared professors and projects.',
            jordan: 'Your education comes up too, but the conversation moves quickly on. Later, you notice people explaining things to you that they didn‚Äôt explain to others.',
            priya: 'Your degree is from outside Canada. People ask clarifying questions about coursework and grading systems, often circling back to how things are ‚Äúusually done here.‚Äù',
            jerry_indigenous: 'You share that you took a non-traditional route and built a portfolio. People nod, but you notice your ideas are more likely to be double-checked or validated by someone else.'
          },
          outcomes: {
            alex: { salaryChange: 0, confidenceChange: 15, burnoutChange: 0, mentorChange: 1, promoted: null,
              text: 'Your background becomes a quiet credibility boost. People assume competence and involve you early in technical discussions.' },
            jordan: { salaryChange: 0, confidenceChange: -15, burnoutChange: 10, mentorChange: 0, promoted: null,
              text: "You start noticing a pattern: you‚Äôre competent, but not immediately trusted. It‚Äôs subtle, but it means you work harder to be seen as solid." },
            priya: { salaryChange: 0, confidenceChange: -20, burnoutChange: 20, mentorChange: 0, promoted: null,
              text: "You spend extra time explaining context and decisions others aren‚Äôt asked for. It slows your momentum and quietly chips away at confidence." },
            jerry_indigenous: { salaryChange: 0, confidenceChange: -15, burnoutChange: 15, mentorChange: 0, promoted: null,
              text: "Your work holds up, but recognition comes later and with more scrutiny. You notice your contributions land more strongly when echoed by someone else." }
          },
          stat: {
            title: 'Education & Pathways',
            value: "Traditional credentials still influence how quickly people are trusted‚Äîespecially early on‚Äîdespite strong performance and real-world skill.",
            source: 'Canadian workforce & hiring research'
          }
        },

        {
          year: 2,
          title: 'The Code Review Dynamic',
          situations: {
            alex: 'Your code review feedback focuses on technical merit and architecture decisions.',
            jordan: 'Your code is solid, but feedback includes more ‚Äútone‚Äù and ‚Äúclarity‚Äù notes than technical notes.',
            priya: 'Your reviews take longer to come back. When they do, comments focus heavily on formatting, wording, and ‚Äúmaking it easy for others to follow.‚Äù',
            jerry_indigenous: 'Your code is reviewed carefully. Comments suggest your approach is ‚Äúunconventional,‚Äù even when it performs better.'
          },
          outcomes: {
            alex: { salaryChange: 0, confidenceChange: 15, burnoutChange: 0, mentorChange: 1, promoted: null,
              text: "You‚Äôre pulled into deeper technical conversations and invited to design discussions." },
            jordan: { salaryChange: 0, confidenceChange: -10, burnoutChange: 10, mentorChange: 0, promoted: null,
              text: "You notice more feedback about how you communicate than what you built. It‚Äôs not huge each time‚Äîjust constant." },
            priya: { salaryChange: 0, confidenceChange: -15, burnoutChange: 15, mentorChange: 0, promoted: null,
              text: "The extra scrutiny slows your output and increases your cognitive load. You start spending more time ‚Äòpre-defending‚Äô your work." },
            jerry_indigenous: { salaryChange: 0, confidenceChange: -15, burnoutChange: 10, mentorChange: 0, promoted: null,
              text: "You‚Äôre pushed toward the ‚Äòstandard way‚Äô even when your approach is better. You adapt to avoid friction." }
          },
          stat: {
            title: 'Feedback Bias',
            value: 'People from underrepresented groups often receive more subjective feedback (style, tone, ‚Äúpresence‚Äù) versus objective feedback (technical decisions).',
            source: 'Workplace feedback research'
          },
          solutions: {
            forIndividuals: [
              { title: 'Redirect to specifics', desc: 'Try: ‚ÄúHelpful‚Äîwhat‚Äôs the technical risk you‚Äôre worried about?‚Äù or ‚ÄúWhat would ‚Äòclear‚Äô look like here?‚Äù' },
              { title: 'Ask for examples', desc: 'If feedback is vague, request a concrete example: ‚ÄúCan you point to the line and show the preferred pattern?‚Äù' },
              { title: 'Name the pattern calmly', desc: 'In a 1:1: ‚ÄúI‚Äôm noticing I get a lot of style feedback. Can we align on the team standard so I‚Äôm not guessing?‚Äù' }
            ],
            forLeaders: [
              { title: 'Use a review rubric', desc: 'Separate technical concerns from preferences. Apply the same standard across people.' },
              { title: 'Audit review comments', desc: 'Spot patterns: who gets ‚Äútone‚Äù feedback? who gets ‚Äúarchitecture‚Äù feedback? Then adjust.' },
              { title: 'Normalize objective language', desc: 'Model ‚Äúimpact-based‚Äù feedback instead of personal feedback.' }
            ]
          }
        },

        {
          year: 2,
          title: 'Promotion Opportunity',
          situations: {
            alex: 'You‚Äôre recommended for a more senior role. Your manager advocates for you early.',
            jordan: 'You‚Äôve met the metrics, but you‚Äôre told to ‚Äúbe patient‚Äù and ‚Äúbuild more presence.‚Äù',
            priya: 'You‚Äôre asked to take on higher-level responsibilities ‚Äúas a trial‚Äù before any formal change is discussed.',
            jerry_indigenous: 'You‚Äôre passed over. Feedback is polite but vague: ‚ÄúWe want someone with more typical leadership experience.‚Äù'
          },
          outcomes: {
            alex: { salaryChange: 12000, confidenceChange: 20, burnoutChange: 0, mentorChange: 1, promoted: true,
              text: 'You get the title change and a clear scope increase. Your manager celebrates it publicly.' },
            jordan: { salaryChange: 2000, confidenceChange: -20, burnoutChange: 20, mentorChange: 0, promoted: false,
              text: 'You get a small raise but no title change. The feedback feels subjective, and the goalposts feel movable.' },
            priya: { salaryChange: 8500, confidenceChange: -15, burnoutChange: 15, mentorChange: 0, promoted: true,
              text: "You‚Äôre formally promoted after months of performing at the next level. The raise is modest compared to the expanded scope, and the path to further progression remains unclear." },
            jerry_indigenous: { salaryChange: 3000, confidenceChange: -25, burnoutChange: 25, mentorChange: 0, promoted: false,
              text: "You‚Äôre told you‚Äôre doing great work, but you‚Äôre not selected. You‚Äôre left with little clarity on what would change the decision." }
          },
          stat: {
            title: 'The Promotion Gap',
            value: 'Promotion processes often rely on informal sponsorship and subjective criteria‚Äîcreating uneven outcomes even with strong performance.',
            source: 'Workplace promotion research'
          },
          solutions: {
            forIndividuals: [
              { title: 'Ask for criteria in writing', desc: 'Try: ‚ÄúWhat are the specific expectations for the next level‚Äîand how will we measure them?‚Äù' },
              { title: 'Time-box the trial', desc: 'If asked to do higher-level work first, propose a review date: ‚ÄúLet‚Äôs reassess in 6‚Äì8 weeks with clear outcomes.‚Äù' },
              { title: 'Ask for sponsorship', desc: 'Use plain language: ‚ÄúIf I‚Äôm aiming for the next level, who will advocate for me in the room I‚Äôm not in?‚Äù' }
            ],
            forLeaders: [
              { title: 'Make criteria measurable', desc: 'Reduce ‚Äúpresence‚Äù vagueness. Define examples of senior-level behaviors and outcomes.' },
              { title: 'Stop endless trials', desc: 'If someone performs at the next level, formalize the role and compensation.' },
              { title: 'Track outcomes by group', desc: 'Look for patterns across identity and address disparities early.' }
            ]
          }
        },

        {
          year: 3,
          title: 'Mentorship & Sponsorship',
          situations: {
            alex: 'Senior engineers pull you into conversations and advocate for you informally.',
            jordan: 'Mentorship happens through shared interests and after-hours connection. You‚Äôre rarely in those spaces‚Äîand no one notices the gap.',
            priya: 'You get advice when you ask, but you‚Äôre not included in the informal network where opportunities are discussed.',
            jerry_indigenous: "When you seek guidance, people are friendly‚Äîbut you don‚Äôt get consistent coaching or advocacy."
          },
          outcomes: {
            alex: { salaryChange: 0, confidenceChange: 20, burnoutChange: 0, mentorChange: 2, promoted: null,
              text: "You gain sponsors who open doors. You‚Äôre introduced to decision-makers and offered stretch work." },
            jordan: { salaryChange: 0, confidenceChange: -10, burnoutChange: 15, mentorChange: 0, promoted: null,
              text: "You don‚Äôt lack ambition‚Äîyou lack access. Opportunities go to people who are already plugged in." },
            priya: { salaryChange: 0, confidenceChange: -15, burnoutChange: 20, mentorChange: 0, promoted: null,
              text: "You work hard, but without sponsorship, your visibility stays limited. Progress feels slow." },
            jerry_indigenous: { salaryChange: 0, confidenceChange: -15, burnoutChange: 15, mentorChange: 0, promoted: null,
              text: "Without a sponsor, you miss out on the assignments that lead to the next step." }
          },
          stat: {
            title: 'Sponsorship Is a Multiplier',
            value: 'It‚Äôs not just having a mentor‚Äîit‚Äôs having someone who speaks for you when decisions are made.',
            source: 'Workplace advancement research'
          }
        },

        {
          year: 3,
          title: 'The High-Profile Project',
          situations: {
            alex: 'You‚Äôre assigned to a visible project. Your manager frames it as a growth opportunity.',
            jordan: 'You volunteer, but you‚Äôre placed in a supporting role while a less experienced colleague gets the lead.',
            priya: 'The lead is chosen before roles are discussed. You‚Äôre assigned maintenance work while others are positioned as ‚Äúclient-facing.‚Äù',
            jerry_indigenous: 'You‚Äôre passed over. Leadership says they want someone with ‚Äútraditional enterprise experience.‚Äù'
          },
          outcomes: {
            alex: { salaryChange: 6000, confidenceChange: 25, burnoutChange: 5, mentorChange: 0, promoted: null,
              text: "The project succeeds. You become known as someone who can lead visible work." },
            jordan: { salaryChange: 1000, confidenceChange: -20, burnoutChange: 20, mentorChange: 0, promoted: null,
              text: "You carry a lot of the load, but the recognition flows elsewhere. You feel undervalued and frustrated." },
            priya: { salaryChange: 0, confidenceChange: -20, burnoutChange: 20, mentorChange: 0, promoted: null,
              text: "You‚Äôre trusted with stability work but not spotlight work. Your growth slows despite strong performance." },
            jerry_indigenous: { salaryChange: 0, confidenceChange: -20, burnoutChange: 20, mentorChange: 0, promoted: null,
              text: "You‚Äôre blocked from the kind of work that proves readiness. The pattern feels hard to challenge." }
          },
          stat: {
            title: 'Opportunity Gaps Compound',
            value: 'High-visibility work accelerates careers. When access isn‚Äôt equitable, trajectories diverge quickly.',
            source: 'Workplace opportunity research'
          }
        },

        {
          year: 5,
          title: 'Five Years In: Where You Stand',
          situations: {
            alex: 'Your network is strong and you‚Äôre being considered for leadership roles.',
            jordan: 'You love the craft, but you‚Äôre tired of the extra friction. You‚Äôve watched peers leave over time.',
            priya: 'You‚Äôve built deep expertise and delivered consistently, but recognition comes slowly. Advancement often feels just out of reach.',
            jerry_indigenous: "You‚Äôve done strong work, but the effort to break through has been draining."
          },
          outcomes: {
            alex: { salaryChange: 30000, confidenceChange: 25, burnoutChange: -10, mentorChange: 0, promoted: true,
              text: "You‚Äôve advanced quickly. You‚Äôre planning your next step and feel confident in the system." },
            jordan: { salaryChange: 5000, confidenceChange: -20, burnoutChange: -5, mentorChange: 0, promoted: false,
              text: "You‚Äôre still in a senior IC role. You‚Äôre proud of your work, but the path hasn‚Äôt felt equally supported." },
            priya: { salaryChange: 8000, confidenceChange: -20, burnoutChange: 10, mentorChange: 0, promoted: false,
              text: "You‚Äôre respected for your work, but progress has been slow and uneven. The constant effort to prove yourself has taken a toll." },
            jerry_indigenous: { salaryChange: 4000, confidenceChange: -20, burnoutChange: 0, mentorChange: 0, promoted: false,
              text: "You‚Äôve grown a lot, but the ‚Äòextra‚Äô you‚Äôve had to carry has been exhausting. You‚Äôre thinking hard about what comes next." }
          },
          stat: {
            title: 'The Outcome Gap',
            value: 'Career outcomes are shaped by compounding access: information, sponsorship, opportunities, and fair evaluation‚Äînot just effort.',
            source: 'Canadian tech workforce research'
          }
        }
      ];

      // ---------------------------
      // Helpers
      // ---------------------------
      function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

      function getStats(charKey) {
        return gameState[`${charKey}Stats`];
      }

      // ---------------------------
      // Rendering
      // ---------------------------
      function render() {
        const app = document.getElementById('app');

        const bgColor = config.background_color || defaultConfig.background_color;
        const surfaceColor = config.surface_color || defaultConfig.surface_color;
        const textColor = config.text_color || defaultConfig.text_color;
        const primaryAction = config.primary_action || defaultConfig.primary_action;
        const secondaryAction = config.secondary_action || defaultConfig.secondary_action;
        const fontFamily = config.font_family || defaultConfig.font_family;
        const fontSize = config.font_size || defaultConfig.font_size;
        const gameTitle = config.game_title || defaultConfig.game_title;
        const introHeading = config.intro_heading || defaultConfig.intro_heading;

        app.style.backgroundColor = bgColor;
        app.style.color = textColor;
        app.style.fontFamily = `${fontFamily}, sans-serif`;
        app.style.fontSize = `${fontSize}px`;

        let content = '';

        switch (gameState.screen) {
          case 'intro':
            content = renderIntro(surfaceColor, textColor, primaryAction, secondaryAction, fontSize, gameTitle, introHeading);
            break;
          case 'select':
            content = renderCharacterSelect(surfaceColor, textColor, primaryAction, secondaryAction, fontSize);
            break;
          case 'playing':
            content = renderScenario(surfaceColor, textColor, primaryAction, secondaryAction, fontSize);
            break;
          case 'stats':
            content = renderFinalStats(surfaceColor, textColor, primaryAction, secondaryAction, fontSize);
            break;
          default:
            content = renderIntro(surfaceColor, textColor, primaryAction, secondaryAction, fontSize, gameTitle, introHeading);
        }

        app.innerHTML = content;
      }

      function renderIntro(surfaceColor, textColor, primaryAction, secondaryAction, fontSize, gameTitle, introHeading) {
        return `
          <div class="min-h-full w-full flex items-center justify-center p-4 md:p-8">
            <div class="max-w-3xl w-full text-center animate-fade">
              <div class="mb-8">
                <span class="text-6xl md:text-8xl">‚öñÔ∏è</span>
              </div>

              <h1 class="font-display font-bold mb-4" style="font-size:${fontSize * 3}px; color:${textColor}">
                ${gameTitle}
              </h1>

              <p class="mb-8 opacity-80" style="font-size:${fontSize * 1.25}px; color:${secondaryAction}">
                ${introHeading}
              </p>

              <div class="stat-card rounded-2xl p-6 md:p-8 mb-8" style="background:${surfaceColor}">
                <p class="leading-relaxed opacity-90" style="font-size:${fontSize * 1.125}px">
                  Meet Alex, Jordan, Priya, and Jerry. They start the same job at the same company with strong skills and big goals.
                </p>
                <p class="leading-relaxed mt-4 font-semibold" style="color:${primaryAction}; font-size:${fontSize * 1.125}px">
                  Five years later, their careers look very different‚Äînot because of effort, but because of compounding access and bias.
                </p>
              </div>

              <button onclick="startGame()"
                class="px-8 py-4 rounded-xl font-semibold transition-all hover:scale-105 animate-pulse-slow"
                style="background:${primaryAction}; color:white; font-size:${fontSize * 1.125}px">
                Begin the Journey ‚Üí
              </button>

              <p class="mt-6 text-sm opacity-60" style="font-size:${fontSize * 0.75}px">
                ‚è±Ô∏è Takes about 5 minutes
              </p>
            </div>
          </div>
        `;
      }

      function renderCharacterSelect(surfaceColor, textColor, primaryAction, secondaryAction, fontSize) {
        return `
          <div class="min-h-full w-full flex items-center justify-center p-4 md:p-8">
            <div class="max-w-5xl w-full animate-fade">
              <h2 class="font-display font-bold text-center mb-2" style="font-size:${fontSize * 2}px">
                Choose Your Perspective
              </h2>
              <p class="text-center opacity-70 mb-8" style="font-size:${fontSize}px">
                You‚Äôll see how small moments can compound into different outcomes.
              </p>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                ${Object.entries(characters).map(([key, char]) => `
                  <button onclick="selectCharacter('${key}')"
                    class="character-card text-left rounded-2xl p-6 transition-all ${gameState.selectedCharacter === key ? 'ring-4' : ''}"
                    style="background:${surfaceColor}; ${gameState.selectedCharacter === key ? `ring-color:${primaryAction};` : ''}">
                    <div class="text-5xl mb-4">${char.emoji}</div>
                    <h3 class="font-display font-bold mb-1"
                      style="font-size:${fontSize * 1.5}px; color:${gameState.selectedCharacter === key ? primaryAction : textColor}">
                      ${char.name}
                    </h3>
                    <p class="text-sm opacity-60 mb-3" style="font-size:${fontSize * 0.875}px; color:${secondaryAction}">
                      ${char.identity}
                    </p>
                    <p class="opacity-80" style="font-size:${fontSize * 0.875}px">
                      ${char.description}
                    </p>
                  </button>
                `).join('')}
              </div>

              <div class="text-center">
                <button onclick="beginScenarios()"
                  class="px-8 py-4 rounded-xl font-semibold transition-all ${gameState.selectedCharacter ? 'hover:scale-105' : 'opacity-50 cursor-not-allowed'}"
                  style="background:${primaryAction}; color:white; font-size:${fontSize * 1.125}px"
                  ${!gameState.selectedCharacter ? 'disabled' : ''}>
                  Start ‚Üí
                </button>
              </div>
            </div>
          </div>
        `;
      }

      function renderScenario(surfaceColor, textColor, primaryAction, secondaryAction, fontSize) {
        const scenario = scenarios[gameState.currentScenario];
        const charKey = gameState.selectedCharacter;
        const char = characters[charKey];
        const outcome = scenario.outcomes[charKey];
        const stats = getStats(charKey);

        const progressPct = ((gameState.currentScenario + 1) / scenarios.length) * 100;

        return `
          <div class="min-h-full w-full p-4 md:p-8">
            <div class="max-w-4xl mx-auto">

              <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                  <span class="font-display text-sm opacity-70" style="font-size:${fontSize * 0.75}px">Year ${scenario.year} of 5</span>
                  <span class="text-sm opacity-70" style="font-size:${fontSize * 0.75}px">${gameState.currentScenario + 1} / ${scenarios.length}</span>
                </div>

                <div class="h-2 rounded-full overflow-hidden" style="background:${surfaceColor}">
                  <div class="h-full progress-bar rounded-full" style="width:${progressPct}%; background:${primaryAction}"></div>
                </div>

                <div class="flex justify-between mt-3">
                  ${[1,2,3,4,5].map(y => `
                    <div class="flex flex-col items-center">
                      <div class="timeline-dot w-3 h-3 rounded-full ${scenario.year >= y ? 'active' : ''}"
                        style="background:${scenario.year >= y ? primaryAction : surfaceColor}"></div>
                      <span class="text-xs mt-1 opacity-50" style="font-size:${fontSize * 0.625}px">Yr ${y}</span>
                    </div>
                  `).join('')}
                </div>
              </div>

              <div class="flex items-center gap-3 mb-6 animate-slide">
                <span class="text-4xl">${char.emoji}</span>
                <div>
                  <div class="font-display font-bold" style="font-size:${fontSize * 1.125}px">${char.name}</div>
                  <div class="text-sm opacity-60" style="font-size:${fontSize * 0.75}px">${char.identity}</div>
                </div>
                <div class="ml-auto text-right">
                  <div class="font-display font-bold" style="color:${secondaryAction}; font-size:${fontSize * 1.25}px">$${stats.salary.toLocaleString()}</div>
                  <div class="text-xs opacity-60" style="font-size:${fontSize * 0.625}px">Current Salary</div>
                </div>
              </div>

              <div class="stat-card rounded-2xl p-6 md:p-8 mb-6 animate-fade" style="background:${surfaceColor}">
                <div class="text-sm font-display opacity-60 mb-2" style="font-size:${fontSize * 0.75}px; color:${secondaryAction}">
                  YEAR ${scenario.year}
                </div>

                <h2 class="font-display font-bold mb-4" style="font-size:${fontSize * 1.75}px">
                  ${scenario.title}
                </h2>

                <p class="text-lg opacity-90 mb-6" style="font-size:${fontSize * 1.125}px">
                  ${scenario.situations[charKey]}
                </p>

                <div class="border-t pt-6" style="border-color:${textColor}20">
                  <div class="text-sm font-display opacity-60 mb-3" style="font-size:${fontSize * 0.75}px">
                    WHAT HAPPENS:
                  </div>
                  <div class="rounded-xl p-4 mb-4" style="background:${primaryAction}20; border-left:4px solid ${primaryAction}">
                    <p class="leading-relaxed" style="font-size:${fontSize}px">
                      ${outcome.text}
                    </p>
                  </div>

                  <div class="flex flex-wrap gap-2 mt-4">
                    ${outcome.salaryChange ? `
                      <span class="px-3 py-1 rounded-full text-sm font-medium"
                        style="background:${outcome.salaryChange > 0 ? '#10b98120' : '#ef444420'};
                               color:${outcome.salaryChange > 0 ? '#10b981' : '#ef4444'};
                               font-size:${fontSize * 0.875}px">
                        ${outcome.salaryChange > 0 ? '+' : ''}$${outcome.salaryChange.toLocaleString()} salary
                      </span>` : ''}

                    ${outcome.promoted === true ? `
                      <span class="px-3 py-1 rounded-full text-sm font-medium"
                        style="background:#10b98120; color:#10b981; font-size:${fontSize * 0.875}px">
                        üéâ Promoted
                      </span>` : outcome.promoted === false ? `
                      <span class="px-3 py-1 rounded-full text-sm font-medium"
                        style="background:#ef444420; color:#ef4444; font-size:${fontSize * 0.875}px">
                        ‚ùå Not selected
                      </span>` : ''}

                    ${outcome.confidenceChange ? `
                      <span class="px-3 py-1 rounded-full text-sm font-medium"
                        style="background:${outcome.confidenceChange > 0 ? '#10b98120' : '#ef444420'};
                               color:${outcome.confidenceChange > 0 ? '#10b981' : '#ef4444'};
                               font-size:${fontSize * 0.875}px">
                        ${outcome.confidenceChange > 0 ? '‚Üë' : '‚Üì'} Confidence
                      </span>` : ''}

                    ${outcome.burnoutChange >= 15 ? `
                      <span class="px-3 py-1 rounded-full text-sm font-medium"
                        style="background:#f59e0b20; color:#f59e0b; font-size:${fontSize * 0.875}px">
                        ‚ö†Ô∏è Burnout risk
                      </span>` : ''}

                    ${outcome.mentorChange > 0 ? `
                      <span class="px-3 py-1 rounded-full text-sm font-medium"
                        style="background:#10b98120; color:#10b981; font-size:${fontSize * 0.875}px">
                        ü§ù +${outcome.mentorChange} Mentor
                      </span>` : ''}
                  </div>
                </div>
              </div>

              ${scenario.stat ? `
                <div class="stat-card rounded-2xl p-6 mb-6 animate-fade"
                  style="background:linear-gradient(135deg, ${primaryAction}30, ${secondaryAction}30)">
                  <div class="flex items-start gap-4">
                    <div class="text-3xl">üìä</div>
                    <div>
                      <div class="font-display font-bold mb-2" style="color:${primaryAction}; font-size:${fontSize * 1.125}px">
                        ${scenario.stat.title}
                      </div>
                      <p class="leading-relaxed" style="font-size:${fontSize}px">${scenario.stat.value}</p>
                      ${scenario.stat.source ? `<p class="text-xs opacity-50 mt-2" style="font-size:${fontSize * 0.625}px">Source: ${scenario.stat.source}</p>` : ''}
                    </div>
                  </div>
                </div>` : ''}

              ${scenario.solutions ? `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 animate-fade">
                  <div class="rounded-2xl p-6" style="background:${primaryAction}15; border-left:4px solid ${primaryAction}">
                    <div class="font-display font-bold mb-3" style="color:${primaryAction}; font-size:${fontSize * 1.125}px">
                      üí™ What You Can Do
                    </div>
                    <div class="space-y-2">
                      ${scenario.solutions.forIndividuals.map(sol => `
                        <div>
                          <div class="font-semibold text-sm mb-1" style="font-size:${fontSize * 0.875}px">${sol.title}</div>
                          <div class="text-xs opacity-80" style="font-size:${fontSize * 0.75}px">${sol.desc}</div>
                        </div>
                      `).join('')}
                    </div>
                  </div>

                  <div class="rounded-2xl p-6" style="background:${secondaryAction}15; border-left:4px solid ${secondaryAction}">
                    <div class="font-display font-bold mb-3" style="color:${secondaryAction}; font-size:${fontSize * 1.125}px">
                      ü§ù What Leaders Should Do
                    </div>
                    <div class="space-y-2">
                      ${scenario.solutions.forLeaders.map(sol => `
                        <div>
                          <div class="font-semibold text-sm mb-1" style="font-size:${fontSize * 0.875}px">${sol.title}</div>
                          <div class="text-xs opacity-80" style="font-size:${fontSize * 0.75}px">${sol.desc}</div>
                        </div>
                      `).join('')}
                    </div>
                  </div>
                </div>` : ''}

              <div class="flex justify-between items-center">
                <button onclick="switchCharacterTemporarily()"
                  class="px-4 py-2 rounded-lg font-medium transition-all hover:scale-105"
                  style="background:${surfaceColor}; font-size:${fontSize * 0.875}px">
                  üëÄ See other paths
                </button>

                <button onclick="nextScenario()"
                  class="px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105"
                  style="background:${primaryAction}; color:white; font-size:${fontSize}px">
                  ${gameState.currentScenario < scenarios.length - 1 ? 'Continue ‚Üí' : 'See Final Results ‚Üí'}
                </button>
              </div>
            </div>
          </div>
        `;
      }

      function renderFinalStats(surfaceColor, textColor, primaryAction, secondaryAction, fontSize) {
        const salaryGap = gameState.alexStats.salary - gameState.jordanStats.salary;

        const cards = Object.keys(characters).map((k) => {
          const c = characters[k];
          const s = getStats(k);
          return `
            <div class="stat-card rounded-2xl p-6" style="background:${surfaceColor}">
              <div class="flex items-center gap-3 mb-4">
                <span class="text-4xl">${c.emoji}</span>
                <div>
                  <div class="font-display font-bold" style="font-size:${fontSize * 1.25}px">${c.name}</div>
                  <div class="text-sm opacity-60" style="font-size:${fontSize * 0.75}px">${c.identity}</div>
                </div>
              </div>
              <div class="space-y-3">
                <div class="flex justify-between"><span class="opacity-70">Salary</span><span class="font-display font-bold">$${s.salary.toLocaleString()}</span></div>
                <div class="flex justify-between"><span class="opacity-70">Promotions</span><span class="font-semibold">${s.promotions}</span></div>
                <div class="flex justify-between"><span class="opacity-70">Mentors</span><span class="font-semibold">${s.mentors}</span></div>
                <div class="flex justify-between"><span class="opacity-70">Confidence</span><span class="font-semibold">${clamp(s.confidence,0,100)}%</span></div>
                <div class="flex justify-between"><span class="opacity-70">Burnout</span><span class="font-semibold">${clamp(s.burnout,0,100)}%</span></div>
              </div>
            </div>
          `;
        }).join('');

        return `
          <div class="min-h-full w-full p-4 md:p-8 overflow-auto">
            <div class="max-w-5xl mx-auto">
              <div class="text-center mb-8 animate-fade">
                <h1 class="font-display font-bold mb-4" style="font-size:${fontSize * 2.5}px">Five Years Later</h1>
                <p class="opacity-80" style="font-size:${fontSize * 1.25}px; color:${secondaryAction}">
                  Same talent. Same effort. Different outcomes.
                </p>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                ${cards}
              </div>

              <div class="stat-card rounded-2xl p-6 md:p-8 mb-8" style="background:linear-gradient(135deg, ${primaryAction}20, ${secondaryAction}20)">
                <h3 class="font-display font-bold mb-3 text-center" style="font-size:${fontSize * 1.5}px">One Example Gap</h3>
                <p class="text-center opacity-80" style="font-size:${fontSize}px">
                  Alex vs Jordan salary difference (in this simulation): <span class="font-display font-bold" style="color:#ef4444">$${salaryGap.toLocaleString()}</span>
                </p>
              </div>

              <div class="stat-card rounded-2xl p-6 md:p-8 text-center" style="background:linear-gradient(135deg, ${primaryAction}, ${secondaryAction})">
                <h3 class="font-display font-bold mb-4 text-white" style="font-size:${fontSize * 1.75}px">What Can We Do?</h3>
                <p class="mb-6 text-white opacity-90" style="font-size:${fontSize * 1.125}px">
                  Change comes from making access and evaluation more fair: clearer criteria, better sponsorship, and more equitable opportunities.
                </p>
                <button onclick="resetGame()"
                  class="px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105"
                  style="background:white; color:${primaryAction}; font-size:${fontSize}px">
                  üîÑ Play Again
                </button>
              </div>
            </div>
          </div>
        `;
      }

      // ---------------------------
      // Game functions
      // ---------------------------
      function startGame() {
        gameState.screen = 'select';
        render();
      }

      function selectCharacter(charKey) {
        gameState.selectedCharacter = charKey;
        render();
      }

      function beginScenarios() {
        if (!gameState.selectedCharacter) return;

        gameState.screen = 'playing';
        gameState.currentScenario = 0;

        Object.keys(characters).forEach((charKey) => {
          gameState[`${charKey}Stats`] = { ...startingStatsByCharacter[charKey] };
        });

        render();
      }

      function applyScenarioToAllCharacters(scenario) {
        Object.keys(characters).forEach((charKey) => {
          const outcome = scenario.outcomes?.[charKey];
          if (!outcome) return;

          const stats = getStats(charKey);
          stats.salary += outcome.salaryChange || 0;
          stats.confidence += outcome.confidenceChange || 0;
          stats.burnout += outcome.burnoutChange || 0;
          stats.mentors += outcome.mentorChange || 0;

          if (outcome.promoted === true) stats.promotions += 1;
        });
      }

      function nextScenario() {
        const scenario = scenarios[gameState.currentScenario];
        applyScenarioToAllCharacters(scenario);

        if (gameState.currentScenario < scenarios.length - 1) {
          gameState.currentScenario += 1;
          render();
        } else {
          gameState.screen = 'stats';
          render();
        }
      }

      function switchCharacterTemporarily() {
        const keys = Object.keys(characters);
        const current = gameState.selectedCharacter;
        const idx = keys.indexOf(current);
        const next = keys[(idx + 1) % keys.length];
        gameState.selectedCharacter = next;
        render();
      }

      function resetGame() {
        gameState = {
          screen: 'intro',
          selectedCharacter: null,
          currentScenario: 0,
          alexStats: { ...startingStatsByCharacter.alex },
          jordanStats: { ...startingStatsByCharacter.jordan },
          priyaStats: { ...startingStatsByCharacter.priya },
          jerry_indigenousStats: { ...startingStatsByCharacter.jerry_indigenous }
        };
        render();
      }

      // Expose functions for onclick
      window.startGame = startGame;
      window.selectCharacter = selectCharacter;
      window.beginScenarios = beginScenarios;
      window.nextScenario = nextScenario;
      window.switchCharacterTemporarily = switchCharacterTemporarily;
      window.resetGame = resetGame;

      // Boot
      render();
    </script>
  </body>
</html>
